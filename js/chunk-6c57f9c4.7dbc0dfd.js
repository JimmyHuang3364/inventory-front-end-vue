(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c57f9c4"],{"00ee":function(t,e,r){"use strict";var s=r("b622"),a=s("toStringTag"),i={};i[a]="z",t.exports="[object z]"===String(i)},"07cf":function(t,e,r){"use strict";r("bc1f")},"0d26":function(t,e,r){"use strict";var s=r("e330"),a=Error,i=s("".replace),n=function(t){return String(new a(t).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,c=o.test(n);t.exports=function(t,e){if(c&&"string"==typeof t&&!a.prepareStackTrace)while(e--)t=i(t,o,"");return t}},"108b":function(t,e,r){},1787:function(t,e,r){"use strict";var s=r("861d");t.exports=function(t){return s(t)||null===t}},2535:function(t,e,r){"use strict";var s=r("2fa3");e["a"]={getAll(){return s["h"].get("/partner_factories")}}},"271a":function(t,e,r){"use strict";var s=r("cb2d"),a=r("e330"),i=r("577e"),n=r("d6d6"),o=URLSearchParams,c=o.prototype,u=a(c.getAll),l=a(c.has),b=new o("a=1");!b.has("a",2)&&b.has("a",void 0)||s(c,"has",(function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&void 0===r)return l(this,t);var s=u(this,t);n(e,1);var a=i(r),o=0;while(o<s.length)if(s[o++]===a)return!0;return!1}),{enumerable:!0,unsafe:!0})},"2ba4":function(t,e,r){"use strict";var s=r("40d5"),a=Function.prototype,i=a.apply,n=a.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?n.bind(i):function(){return n.apply(i,arguments)})},"3a38":function(t,e,r){"use strict";r("bd6a")},"3bbe":function(t,e,r){"use strict";var s=r("1787"),a=String,i=TypeError;t.exports=function(t){if(s(t))return t;throw new i("Can't set "+a(t)+" as a prototype")}},5494:function(t,e,r){"use strict";var s=r("83ab"),a=r("e330"),i=r("edd0"),n=URLSearchParams.prototype,o=a(n.forEach);s&&!("size"in n)&&i(n,"size",{get:function(){var t=0;return o(this,(function(){t++})),t},configurable:!0,enumerable:!0})},"575a":function(t,e,r){"use strict";r("88a7"),r("271a"),r("5494");var s=r("2fa3");e["a"]={getPartNumbers(t){const e=new URLSearchParams(t);return s["h"].get("/warehouse/partnumbers?"+e.toString())},getSubPartNumbers(){return s["h"].get("/warehouse/subpartnumbers")},getSearchPartNumbers(t){const e=new URLSearchParams(t);return s["h"].get("/warehouse/partnumbers/search?"+e.toString())}}},"577e":function(t,e,r){"use strict";var s=r("f5df"),a=String;t.exports=function(t){if("Symbol"===s(t))throw new TypeError("Cannot convert a Symbol value to a string");return a(t)}},"6f19":function(t,e,r){"use strict";var s=r("9112"),a=r("0d26"),i=r("b980"),n=Error.captureStackTrace;t.exports=function(t,e,r,o){i&&(n?n(t,e):s(t,"stack",a(r,o)))}},7156:function(t,e,r){"use strict";var s=r("1626"),a=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var n,o;return i&&s(n=e.constructor)&&n!==r&&a(o=n.prototype)&&o!==r.prototype&&i(t,o),t}},7282:function(t,e,r){"use strict";var s=r("e330"),a=r("59ed");t.exports=function(t,e,r){try{return s(a(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(i){}}},"73af":function(t,e,r){"use strict";r("e61f")},"88a7":function(t,e,r){"use strict";var s=r("cb2d"),a=r("e330"),i=r("577e"),n=r("d6d6"),o=URLSearchParams,c=o.prototype,u=a(c.append),l=a(c["delete"]),b=a(c.forEach),h=a([].push),g=new o("a=1&a=2&b=3");g["delete"]("a",1),g["delete"]("b",void 0),g+""!=="a=2"&&s(c,"delete",(function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&void 0===r)return l(this,t);var s=[];b(this,(function(t,e){h(s,{key:e,value:t})})),n(e,1);var a,o=i(t),c=i(r),g=0,m=0,d=!1,p=s.length;while(g<p)a=s[g++],d||a.key===o?(d=!0,l(this,a.key)):m++;while(m<p)a=s[m++],a.key===o&&a.value===c||u(this,a.key,a.value)}),{enumerable:!0,unsafe:!0})},"9f3a":function(t,e,r){"use strict";var s=r("7a23");const a={class:"loader-center m-0 p-0 text-white d-flex justify-content-center align-items-center"};function i(t,e,r,i,n,o){return Object(s["v"])(),Object(s["f"])("div",a,e[0]||(e[0]=[Object(s["g"])("div",{class:"loader-ring"},null,-1),Object(s["g"])("span",null,"loading...",-1)]))}var n={},o=(r("3a38"),r("6b0d")),c=r.n(o);const u=c()(n,[["render",i],["__scopeId","data-v-1b592620"]]);e["a"]=u},ab36:function(t,e,r){"use strict";var s=r("861d"),a=r("9112");t.exports=function(t,e){s(e)&&"cause"in e&&a(t,"cause",e.cause)}},aeb0:function(t,e,r){"use strict";var s=r("9bf2").f;t.exports=function(t,e,r){r in t||s(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},b980:function(t,e,r){"use strict";var s=r("d039"),a=r("5c6c");t.exports=!s((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",a(1,7)),7!==t.stack)}))},bc1f:function(t,e,r){},bd6a:function(t,e,r){},d021:function(t,e,r){"use strict";var s=r("2fa3");e["a"]={Warehousing:{create(t){return s["h"].post("/warehouse/warehousing",t)}},Shipping:{create(t){return s["h"].post("/warehouse/shipping",t)}},Outsourcinglist:{get(){return s["h"].get("/warehouse/outsourcinglist")},create(t){return s["h"].post("/warehouse/outsourcinglist/create",t)},delete(t){return s["h"].delete("/warehouse/outsourcinglist/"+t)},done(t,e){return s["h"].post(`/warehouse/outsourcinglist/${t}/done`,e)}}}},d2bb:function(t,e,r){"use strict";var s=r("7282"),a=r("861d"),i=r("1d80"),n=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=s(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch(o){}return function(r,s){return i(r),n(s),a(r)?(e?t(r,s):r.__proto__=s,r):r}}():void 0)},d6d6:function(t,e,r){"use strict";var s=TypeError;t.exports=function(t,e){if(t<e)throw new s("Not enough arguments");return t}},d9e2:function(t,e,r){"use strict";var s=r("23e7"),a=r("cfe9"),i=r("2ba4"),n=r("e5cb"),o="WebAssembly",c=a[o],u=7!==new Error("e",{cause:7}).cause,l=function(t,e){var r={};r[t]=n(t,e,u),s({global:!0,constructor:!0,arity:1,forced:u},r)},b=function(t,e){if(c&&c[t]){var r={};r[t]=n(o+"."+t,e,u),s({target:o,stat:!0,constructor:!0,arity:1,forced:u},r)}};l("Error",(function(t){return function(e){return i(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),l("URIError",(function(t){return function(e){return i(t,this,arguments)}})),b("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),b("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),b("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},e391:function(t,e,r){"use strict";var s=r("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:s(t)}},e5cb:function(t,e,r){"use strict";var s=r("d066"),a=r("1a2d"),i=r("9112"),n=r("3a9b"),o=r("d2bb"),c=r("e893"),u=r("aeb0"),l=r("7156"),b=r("e391"),h=r("ab36"),g=r("6f19"),m=r("83ab"),d=r("c430");t.exports=function(t,e,r,p){var f="stackTraceLimit",O=p?2:1,j=t.split("."),w=j[j.length-1],y=s.apply(null,j);if(y){var N=y.prototype;if(!d&&a(N,"cause")&&delete N.cause,!r)return y;var S=s("Error"),v=e((function(t,e){var r=b(p?e:t,void 0),s=p?new y(t):new y;return void 0!==r&&i(s,"message",r),g(s,v,s.stack,2),this&&n(N,this)&&l(s,this,v),arguments.length>O&&h(s,arguments[O]),s}));if(v.prototype=N,"Error"!==w?o?o(v,S):c(v,S,{name:!0}):m&&f in y&&(u(v,y,f),u(v,y,"prepareStackTrace")),c(v,y),!d)try{N.name!==w&&i(N,"name",w),N.constructor=v}catch(D){}return v}}},e61f:function(t,e,r){},edd0:function(t,e,r){"use strict";var s=r("13d2"),a=r("9bf2");t.exports=function(t,e,r){return r.get&&s(r.get,e,{getter:!0}),r.set&&s(r.set,e,{setter:!0}),a.f(t,e,r)}},ef4f:function(t,e,r){"use strict";r("108b")},f2c5:function(t,e,r){"use strict";var s=r("2fa3");e["a"]={getAll(){return s["h"].get("/production_process_items")}}},f4a9:function(t,e,r){"use strict";r.r(e);var s=r("7a23");const a={class:"mt-3"},i={key:0},n={key:1},o={class:"d-flex justify-content-center"},c={class:"form-row"},u={class:"col-auto"},l={class:"col-auto"},b={class:"col-auto"},h={class:"col-auto align-self-end"},g={class:"d-flex flex-row justify-content-around align-items-center my-3"},m={class:"mb-2"},d={class:"d-flex justify-content-around"},p={style:{"flex-basis":"45%"}},f={class:"mb-3",style:{"flex-basis":"50%"}},O={class:"d-flex justify-content-between align-items-center mb-2"},j={class:"btn-group btn-group-toggle","data-toggle":"buttons"},w={class:"btn btn-outline-light active"},y={class:"btn btn-outline-light"};function N(t,e,r,N,S,v){const D=Object(s["A"])("PageLoader"),P=Object(s["A"])("router-link"),F=Object(s["A"])("PartnumberTable"),I=Object(s["A"])("WarehousingHistoriesTable"),x=Object(s["A"])("OutsourcingListsTable");return Object(s["v"])(),Object(s["f"])("div",a,[S.isLoading?(Object(s["v"])(),Object(s["f"])("div",i,[Object(s["j"])(D)])):Object(s["e"])("",!0),S.isLoading?Object(s["e"])("",!0):(Object(s["v"])(),Object(s["f"])("div",n,[Object(s["g"])("form",o,[Object(s["g"])("div",c,[Object(s["g"])("div",u,[e[7]||(e[7]=Object(s["g"])("p",{class:"text-light m-0"},"品番",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>S.searchText=t),list:"partnumberList",type:"text",class:"form-control",name:"searchText",id:"searchText",placeholder:"搜尋番號",value:""},null,512),[[s["H"],S.searchText]]),e[8]||(e[8]=Object(s["g"])("datalist",{id:"partnumberList"},null,-1))]),Object(s["g"])("div",l,[e[9]||(e[9]=Object(s["g"])("p",{class:"text-light m-0"},"開始",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>S.startDate=t),type:"date",class:"form-control",name:"startDate",id:"startDate",value:""},null,512),[[s["H"],S.startDate]])]),Object(s["g"])("div",b,[e[10]||(e[10]=Object(s["g"])("p",{class:"text-light m-0"},"結束",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>S.endDate=t),type:"date",class:"form-control",name:"endDate",id:"endDate",value:""},null,512),[[s["H"],S.endDate]])]),Object(s["g"])("div",h,[Object(s["j"])(P,{to:{name:"warehouse-home",query:{searchText:S.searchText,startDate:S.startDate,endDate:S.endDate}},class:"btn btn-primary",role:"button"},{default:Object(s["K"])(()=>e[11]||(e[11]=[Object(s["i"])("搜尋")])),_:1},8,["to"])])])]),Object(s["g"])("div",g,[Object(s["g"])("div",m,[Object(s["j"])(P,{class:"btn btn-outline-secondary mr-1",to:{name:"warehouse-home"},role:"button"},{default:Object(s["K"])(()=>e[12]||(e[12]=[Object(s["i"])("全部")])),_:1}),(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(S.customers,t=>(Object(s["v"])(),Object(s["d"])(P,{key:t.id,class:"btn btn-outline-secondary mx-1",to:{name:"warehouse-home",query:{customerId:t.id}},role:"button"},{default:Object(s["K"])(()=>[Object(s["i"])(Object(s["D"])(t.name),1)]),_:2},1032,["to"]))),128))])]),Object(s["g"])("section",d,[Object(s["g"])("div",p,[Object(s["j"])(F,{initialPartNumbers:S.partNumbers},null,8,["initialPartNumbers"])]),Object(s["g"])("div",f,[Object(s["g"])("div",O,[Object(s["g"])("div",j,[Object(s["g"])("label",w,[Object(s["g"])("input",{onClick:e[3]||(e[3]=(...t)=>v.afterHandleShowWarehousingHistoriesTable&&v.afterHandleShowWarehousingHistoriesTable(...t)),type:"radio",name:"options",id:"option1",checked:""}),e[13]||(e[13]=Object(s["i"])(" 出入庫紀錄 "))]),Object(s["g"])("label",y,[Object(s["g"])("input",{onClick:e[4]||(e[4]=(...t)=>v.afterHandleShowOutsourcingListsTable&&v.afterHandleShowOutsourcingListsTable(...t)),type:"radio",name:"options",id:"option3"}),e[14]||(e[14]=Object(s["i"])(" 外包清單 "))])]),Object(s["g"])("div",null,[Object(s["L"])(Object(s["g"])("div",null,[Object(s["L"])(Object(s["g"])("button",{onClick:e[5]||(e[5]=(...t)=>v.toggleShowFastShippingWarehousingFormArea&&v.toggleShowFastShippingWarehousingFormArea(...t)),class:"btn btn-outline-warning mr-2"},"快速新增",512),[[s["I"],!S.isShowFastShippingWarehousingFormArea]]),Object(s["j"])(P,{to:{name:"warehouse-ShippingWarehousing"},class:"btn btn-info",role:"button"},{default:Object(s["K"])(()=>e[15]||(e[15]=[Object(s["i"])("新增出入庫")])),_:1})],512),[[s["I"],!S.showOutsourcingListsTable]]),Object(s["L"])(Object(s["g"])("div",null,[Object(s["L"])(Object(s["g"])("button",{onClick:e[6]||(e[6]=(...t)=>v.toggleShowFastOutsourcingFormArea&&v.toggleShowFastOutsourcingFormArea(...t)),class:"btn btn-outline-warning mr-2"},"快速新增",512),[[s["I"],!S.isShowFastOutsourcingFormArea]]),Object(s["j"])(P,{to:{name:"warehouse-outsourcing-new"},class:"btn btn-primary",role:"button"},{default:Object(s["K"])(()=>e[16]||(e[16]=[Object(s["i"])("新增外包")])),_:1})],512),[[s["I"],S.showOutsourcingListsTable]])])]),Object(s["L"])(Object(s["j"])(I,{onAfterClickToggleFastFormArea:v.toggleShowFastShippingWarehousingFormArea,"initial-warehousing-histories":S.warehousingHistories,"initial-part-numbers":S.partNumbers,"initial-is-show-fast-shipping-warehousing-form-area":S.isShowFastShippingWarehousingFormArea},null,8,["onAfterClickToggleFastFormArea","initial-warehousing-histories","initial-part-numbers","initial-is-show-fast-shipping-warehousing-form-area"]),[[s["I"],!S.showOutsourcingListsTable]]),Object(s["L"])(Object(s["j"])(x,{onOutsourcingDelete:v.afterOutsourcingDoneToUpdateQuantity,onOutsourcingIsDoneToSubmit:v.afterOutsourcingDoneToUpdateQuantity,onAfterSubmitedNew:v.after_submited_new,onAfterClickToggleFastFormArea:v.toggleShowFastOutsourcingFormArea,"initial-is-show-fast-outsourcing-form-area":S.isShowFastOutsourcingFormArea,"initial-part-numbers":S.partNumbers},null,8,["onOutsourcingDelete","onOutsourcingIsDoneToSubmit","onAfterSubmitedNew","onAfterClickToggleFastFormArea","initial-is-show-fast-outsourcing-form-area","initial-part-numbers"]),[[s["I"],S.showOutsourcingListsTable]])])])]))])}r("d9e2");var S=r("2fa3"),v=r("575a");const D={class:"partnumbers_area"},P={class:"table table-sm table-hover table-bordered table-dark"},F={key:0,style:{"background-color":"#b0b0b0","text-align":"center"}},I={class:"text-dark",scope:"row"},x={class:"text-dark"},A={class:"text-dark"},L={key:1,style:{"background-color":"#182f8b","text-align":"center"}},k={scope:"row"},W={class:"text-dark",scope:"row"},T={class:"text-dark"},q={class:"text-dark"};function H(t,e,r,a,i,n){return Object(s["L"])((Object(s["v"])(),Object(s["f"])("div",D,[e[1]||(e[1]=Object(s["g"])("h2",{class:"text-light"},"庫存總攬",-1)),Object(s["g"])("table",P,[e[0]||(e[0]=Object(s["g"])("thead",null,[Object(s["g"])("tr",{class:"table-active",style:{"text-align":"center"}},[Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"品番")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"在庫數量")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"備註")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"安全庫存")])])],-1)),(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.partNumbers,t=>(Object(s["v"])(),Object(s["f"])("tbody",{key:t.id,style:{"border-top-width":"20px","border-color":"rgb(19, 19, 19)"}},[t.PartNumberId?(Object(s["v"])(),Object(s["f"])("tr",F,[Object(s["g"])("td",I,Object(s["D"])(t.name),1),Object(s["g"])("td",{class:Object(s["q"])([{"bg-danger":t.quantity<t.safetyStockQuantity},{"text-dark":t.quantity>=t.safetyStockQuantity}])},Object(s["D"])(t.quantity),3),Object(s["g"])("td",x,Object(s["D"])(t.commonName),1),Object(s["g"])("td",A,Object(s["D"])(t.safetyStockQuantity),1)])):(Object(s["v"])(),Object(s["f"])("tr",L,[Object(s["g"])("td",k,Object(s["D"])(t.name),1),Object(s["g"])("td",{class:Object(s["q"])([{"bg-danger":t.quantity<t.safetyStockQuantity}])},Object(s["D"])(t.quantity),3),Object(s["g"])("td",null,Object(s["D"])(t.commonName),1),Object(s["g"])("td",null,Object(s["D"])(t.safetyStockQuantity),1)])),(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(t.subPartNumbers,t=>(Object(s["v"])(),Object(s["f"])("tr",{key:t.id,style:{"text-align":"center","background-color":"#b0b0b0"}},[Object(s["g"])("td",W,Object(s["D"])(t.name),1),Object(s["g"])("td",{class:Object(s["q"])([{"bg-danger text-white":t.quantity<t.safetyStockQuantity},{"text-dark":t.quantity>=t.safetyStockQuantity}])},Object(s["D"])(t.quantity),3),Object(s["g"])("td",T,Object(s["D"])(t.commonName),1),Object(s["g"])("td",q,Object(s["D"])(t.safetyStockQuantity),1)]))),128))]))),128))])],512)),[[s["I"],!i.isLoading]])}var E={props:{initialPartNumbers:{type:Array}},created(){this.fetchInitialPartNumbers(this.initialPartNumbers),this.isLoading=!1},data(){return{partNumbers:[],isLoading:!0}},methods:{fetchInitialPartNumbers(t){this.partNumbers=t}},watch:{initialPartNumbers(t){this.fetchInitialPartNumbers(t)}}},_=r("6b0d"),C=r.n(_);const $=C()(E,[["render",H]]);var U=$;const Q={class:"histories_area"},K={key:0,class:"view bg-dark mb-3 px-3"},M={class:"d-flex justify-content-between align-items-center"},z={class:"form-row"},V={class:"form-group col-md-3"},R={class:"form-group col-md-3"},J={id:"partNumbers-list"},Y=["value"],B={class:"form-group col-md-3"},G={class:"form-group col-md-3"},X={class:"table table-sm table-dark table-striped table-hover"},Z={scope:"row"},tt={key:0,class:"text-dark",style:{"background-color":"#ea9d06"}},et={key:1},rt={key:2,class:"bg-success"},st={key:3};function at(t,e,r,a,i,n){return Object(s["L"])((Object(s["v"])(),Object(s["f"])("div",Q,[i.isShowFastShippingWarehousingFormArea?(Object(s["v"])(),Object(s["f"])("div",K,[Object(s["g"])("div",M,[e[7]||(e[7]=Object(s["g"])("h1",{class:"text-white"},"新增",-1)),Object(s["g"])("div",null,[Object(s["g"])("button",{onClick:e[0]||(e[0]=Object(s["N"])((...t)=>n.handleSubmitWarehousing&&n.handleSubmitWarehousing(...t),["stop","prevent"])),class:"btn btn-outline-warning mr-4"},"入庫"),Object(s["g"])("button",{onClick:e[1]||(e[1]=Object(s["N"])((...t)=>n.handleSubmitShipping&&n.handleSubmitShipping(...t),["stop","prevent"])),class:"btn btn-outline-success mr-4"},"出庫"),Object(s["g"])("button",{onClick:e[2]||(e[2]=Object(s["N"])((...t)=>n.toggleShowFastShippingWarehousingFormArea&&n.toggleShowFastShippingWarehousingFormArea(...t),["stop","prevent"])),class:"btn btn-outline-danger mr-2"},"Close")])]),Object(s["g"])("div",z,[Object(s["g"])("div",V,[e[8]||(e[8]=Object(s["g"])("label",{class:"add-form-label",for:"inputDate"},"日期",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.newWarehousingOrShipping.date=t),type:"date",class:"form-control",id:"inputDate"},null,512),[[s["H"],i.newWarehousingOrShipping.date]])]),Object(s["g"])("div",R,[e[9]||(e[9]=Object(s["g"])("label",{class:"add-form-label",for:"inputNmae"},"品番號",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.newWarehousingOrShipping.name=t),list:"partNumbers-list",type:"text",class:"form-control",id:"inputName"},null,512),[[s["H"],i.newWarehousingOrShipping.name]]),Object(s["g"])("datalist",J,[(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.partNumbersAndSubPartNumbersList,t=>(Object(s["v"])(),Object(s["f"])("option",{key:t.index,value:t.name},null,8,Y))),128))])]),Object(s["g"])("div",B,[e[10]||(e[10]=Object(s["g"])("label",{class:"add-form-label",for:"inputQuantity"},"數量",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.newWarehousingOrShipping.quantity=t),type:"number",class:"form-control",id:"inputQuantity",min:"0"},null,512),[[s["H"],i.newWarehousingOrShipping.quantity]])]),Object(s["g"])("div",G,[e[11]||(e[11]=Object(s["g"])("label",{class:"add-form-label",for:"inputNote"},"備註",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.newWarehousingOrShipping.note=t),type:"text",class:"form-control",id:"inputNote",placeholder:"可空白..."},null,512),[[s["H"],i.newWarehousingOrShipping.note]])])])])):Object(s["e"])("",!0),Object(s["g"])("table",X,[e[12]||(e[12]=Object(s["g"])("thead",null,[Object(s["g"])("tr",{class:"table-active",style:{"text-align":"center"}},[Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"日期")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"品番")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"入庫")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"出庫")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"餘存")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"備註")])])],-1)),Object(s["g"])("tbody",null,[(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.warehousingHistories,t=>(Object(s["v"])(),Object(s["f"])("tr",{key:t.id,style:{"text-align":"center"}},[Object(s["g"])("th",Z,Object(s["D"])(t.textCreatedAt),1),Object(s["g"])("td",null,Object(s["D"])(t.PartNumber.name?t.PartNumber.name:t.SubPartNumber.name),1),t.quntityOfWarehousing?(Object(s["v"])(),Object(s["f"])("td",tt,Object(s["D"])(t.quntityOfWarehousing),1)):(Object(s["v"])(),Object(s["f"])("td",et,Object(s["D"])(t.quntityOfWarehousing),1)),t.quntityOfShipping?(Object(s["v"])(),Object(s["f"])("td",rt,Object(s["D"])(t.quntityOfShipping),1)):(Object(s["v"])(),Object(s["f"])("td",st,Object(s["D"])(t.quntityOfShipping),1)),Object(s["g"])("td",null,Object(s["D"])(t.totalQuntity),1),Object(s["g"])("td",null,Object(s["D"])(t.note),1)]))),128))])])],512)),[[s["I"],!i.isLoading]])}r("14d9");var it=r("d021"),nt={inject:["reload"],props:{initialWarehousingHistories:{type:Array},initialIsShowFastShippingWarehousingFormArea:{type:Boolean},initialPartNumbers:{type:Array}},created(){this.fetchInitialWarehousingHistories(this.initialWarehousingHistories),this.fetchIsShowFastShippingWarehousingFormArea(this.initialIsShowFastShippingWarehousingFormArea),this.fetchInitialPartNumbers(this.initialPartNumbers),this.fetchSubPartNumbers(),this.fetchTodaysDate(),this.isLoading=!1},data(){return{newWarehousingOrShipping:{date:"",name:"",quantity:null,note:"",productId:"",isSubPart:!1},partNumbersList:[],subPartNumbersList:[],partNumbersAndSubPartNumbersList:[],warehousingHistories:[],shipmentList:[],warehousingList:[],isLoading:!0,isShowFastShippingWarehousingFormArea:!1}},methods:{fetchInitialWarehousingHistories(t){this.warehousingHistories=t},fetchIsShowFastShippingWarehousingFormArea(t){this.isShowFastShippingWarehousingFormArea=t},fetchInitialPartNumbers(t){this.partNumbersList=t},async fetchSubPartNumbers(){try{const{data:t,status:e,statusText:r}=await v["a"].getSubPartNumbers();if("OK"!==r&&200!==e)throw new Error;const{subPartNumbers:s}=t;this.subPartNumbersList=s,this.mergePartNumbersAndSubPartNumbersToList()}catch(t){S["c"].fire({icon:"error",title:"載入資料錯誤，請稍後在試。"})}},mergePartNumbersAndSubPartNumbersToList(){this.partNumbersAndSubPartNumbersList=this.partNumbersList.concat(this.subPartNumbersList)},async handleSubmitWarehousing(){try{if(!this.verifyDataAfterSubmit())throw new Error("日期、品番號、數量不可空白");this.warehousingList.push(this.fetchPartNumberIdOrSubPartNumberId());const t=new FormData;t.append("warehousingList",JSON.stringify(this.warehousingList));const{data:e,statusText:r}=await it["a"].Warehousing.create(t),s=e.status,a=e.message;if("success"!==s&&"OK"!==r)throw new Error(a||"入庫時發生錯誤，請稍後在試。");this.warehousingList=[],S["c"].fire({icon:"success",title:"入庫資料登載成功"}),this.reload()}catch(t){S["c"].fire({icon:"error",title:t||"拿取製程項目清單錯誤，請稍後再試。"})}},async handleSubmitShipping(){try{if(!this.verifyDataAfterSubmit())throw new Error("日期、品番號、數量不可空白");if(!this.checkPartOrSubPartQuantityToShip())throw new Error("數量不足以出貨，請檢查在庫量。");this.shipmentList.push(this.fetchPartNumberIdOrSubPartNumberId());const t=new FormData;t.append("shipmentList",JSON.stringify(this.shipmentList));const{data:e,statusText:r}=await it["a"].Shipping.create(t),s=e.status,a=e.message;if("success"!==s&&"OK"!==r)throw new Error(a||"出貨時發生錯誤，請稍後在試。");this.shipmentList=[],S["c"].fire({icon:"success",title:"出庫資料登載成功"}),this.reload()}catch(t){S["c"].fire({icon:"error",title:t||"拿取製程項目清單錯誤，請稍後再試。"})}},verifyDataAfterSubmit(){if(""!==this.newWarehousingOrShipping.date&&""!==this.newWarehousingOrShipping.name&&Number(this.newWarehousingOrShipping.quantity)>0)return!0},fetchPartNumberIdOrSubPartNumberId(){try{for(let t of this.partNumbersList)if(t.name===this.newWarehousingOrShipping.name)return this.newWarehousingOrShipping.productId=t.id,this.newWarehousingOrShipping;for(let t of this.subPartNumbersList)if(t.name===this.newWarehousingOrShipping.name)return this.newWarehousingOrShipping.productId=t.id,this.newWarehousingOrShipping.isSubPart=!0,this.newWarehousingOrShipping}catch(t){S["c"].fire({icon:"error",title:"取得不品ID時出現錯誤。"})}},checkPartOrSubPartQuantityToShip(){for(let t of this.partNumbersList)if(t.name===this.newWarehousingOrShipping.name)return t.quantity-Number(this.newWarehousingOrShipping.quantity)>=0;for(let t of this.subPartNumbersList)if(t.name===this.newWarehousingOrShipping.name)return t.quantity-Number(this.newWarehousingOrShipping.quantity)>=0},toggleShowFastShippingWarehousingFormArea(){this.$emit("after-click-toggle-fast-form-area")},fetchTodaysDate(){let t=(new Date).getFullYear().toString(),e="",r="";e=(new Date).getMonth()<9?"0"+((new Date).getMonth()+1).toString():((new Date).getMonth()+1).toString(),r=(new Date).getDate()<10?"0"+(new Date).getDate().toString():(new Date).getDate().toString();const s=`${t}-${e}-${r}`;this.newWarehousingOrShipping.date=s}},watch:{initialWarehousingHistories(t){this.fetchInitialWarehousingHistories(t)},initialIsShowFastShippingWarehousingFormArea(t){this.fetchIsShowFastShippingWarehousingFormArea(t)},initialPartNumbers(t){this.fetchInitialPartNumbers(t)}}};r("ef4f");const ot=C()(nt,[["render",at],["__scopeId","data-v-0345cd46"]]);var ct=ot;const ut={class:"histories_area"},lt={class:"view bg-dark mb-3 px-3"},bt={class:"d-flex justify-content-between align-items-center"},ht=["disabled"],gt={class:"form-row"},mt={class:"form-group col-md"},dt={class:"form-group col-md"},pt={id:"partNumber-list"},ft=["value"],Ot={class:"form-row"},jt={class:"form-group col-md"},wt={id:"partnerFactories-list"},yt=["value"],Nt={class:"form-group col-md"},St={id:"productionProcessItems-list"},vt=["value"],Dt={class:"form-row"},Pt={class:"form-group col-md"},Ft={class:"form-row"},It={class:"form-group col-md"},xt={class:"table table-sm table-dark table-striped table-hover"},At={scope:"row"},Lt={class:"d-flex justify-content-around"},kt=["onClick"],Wt=["onClick"];function Tt(t,e,r,a,i,n){return Object(s["L"])((Object(s["v"])(),Object(s["f"])("div",ut,[Object(s["L"])(Object(s["g"])("div",lt,[Object(s["g"])("div",bt,[e[8]||(e[8]=Object(s["g"])("h1",{class:"text-white"},"新增",-1)),Object(s["g"])("div",null,[Object(s["g"])("button",{onClick:e[0]||(e[0]=(...t)=>n.handleSubmit&&n.handleSubmit(...t)),class:"btn btn-outline-warning mr-4",disabled:i.isProcessing},Object(s["D"])(i.isProcessing?"處理中...":"送出"),9,ht),Object(s["g"])("button",{onClick:e[1]||(e[1]=(...t)=>n.toggleShowFastShippingWarehousingFormArea&&n.toggleShowFastShippingWarehousingFormArea(...t)),class:"btn btn-outline-danger mr-2"},"Close")])]),Object(s["g"])("div",gt,[Object(s["g"])("div",mt,[e[9]||(e[9]=Object(s["g"])("label",{class:"add-form-label",for:"inputDate"},"日期",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.newOutsourcing.actionDate=t),type:"date",class:"form-control",id:"actionDate"},null,512),[[s["H"],i.newOutsourcing.actionDate]])]),Object(s["g"])("div",dt,[e[10]||(e[10]=Object(s["g"])("label",{class:"add-form-label",for:"inputNmae"},"品番號",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.newOutsourcing.partNumberName=t),list:"partNumber-list",type:"text",class:"form-control",id:"inputPartnerFactoryName"},null,512),[[s["H"],i.newOutsourcing.partNumberName]]),Object(s["g"])("datalist",pt,[(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.partNumbers,t=>(Object(s["v"])(),Object(s["f"])("option",{key:t.id,value:t.name},null,8,ft))),128))])])]),Object(s["g"])("div",Ot,[Object(s["g"])("div",jt,[e[11]||(e[11]=Object(s["g"])("label",{class:"add-form-label",for:"inputNmae"},"廠商",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.newOutsourcing.partnerFactoryName=t),list:"partnerFactories-list",type:"text",class:"form-control",id:"inputPartnerFactoryName"},null,512),[[s["H"],i.newOutsourcing.partnerFactoryName]]),Object(s["g"])("datalist",wt,[(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.partnerFactories,t=>(Object(s["v"])(),Object(s["f"])("option",{key:t.id,value:t.name},null,8,yt))),128))])]),Object(s["g"])("div",Nt,[e[12]||(e[12]=Object(s["g"])("label",{class:"add-form-label",for:"inputNmae"},"製程",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.newOutsourcing.productionProcessItemName=t),list:"productionProcessItems-list",type:"text",class:"form-control",id:"inputProductionProcessItemName"},null,512),[[s["H"],i.newOutsourcing.productionProcessItemName]]),Object(s["g"])("datalist",St,[(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.productionProcessItems,t=>(Object(s["v"])(),Object(s["f"])("option",{key:t.id,value:t.processName},null,8,vt))),128))])])]),Object(s["g"])("div",Dt,[Object(s["g"])("div",Pt,[e[13]||(e[13]=Object(s["g"])("label",{class:"add-form-label",for:"inputQuantity"},"數量",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.newOutsourcing.quantity=t),newOutsourcing:"",type:"number",class:"form-control",id:"inputQuantity",min:"0"},null,512),[[s["H"],i.newOutsourcing.quantity]])])]),Object(s["g"])("div",Ft,[Object(s["g"])("div",It,[e[14]||(e[14]=Object(s["g"])("label",{class:"add-form-label",for:"inputNote"},"備註",-1)),Object(s["L"])(Object(s["g"])("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>i.newOutsourcing.note=t),type:"text",class:"form-control",id:"inputNote",placeholder:"可空白..."},null,512),[[s["H"],i.newOutsourcing.note]])])])],512),[[s["I"],i.isShowFastOutsourcingFormArea]]),Object(s["g"])("table",xt,[e[15]||(e[15]=Object(s["g"])("thead",null,[Object(s["g"])("tr",{class:"table-active",style:{"text-align":"center"}},[Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"發包日")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"品番")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"廠商")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"製程")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"數量")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"備註")]),Object(s["g"])("th",{scope:"col"},[Object(s["g"])("h4",null,"操作")])])],-1)),Object(s["g"])("tbody",null,[(Object(s["v"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(i.outsourcinglists,t=>(Object(s["v"])(),Object(s["f"])("tr",{key:t.id,style:{"text-align":"center"}},[Object(s["g"])("th",At,Object(s["D"])(t.actionDate),1),Object(s["g"])("td",null,Object(s["D"])(t.PartNumber.name?t.PartNumber.name:t.SubPartNumber.name),1),Object(s["g"])("td",null,Object(s["D"])(t.PartnerFactory.name),1),Object(s["g"])("td",null,Object(s["D"])(t.ProductionProcessItem.processName),1),Object(s["g"])("td",null,Object(s["D"])(t.quantity),1),Object(s["g"])("td",null,Object(s["D"])(t.note),1),Object(s["g"])("td",null,[Object(s["g"])("div",Lt,[Object(s["g"])("button",{onClick:Object(s["N"])(e=>n.theOutsourcingIsDoneToSubmit(t.id,{partNumberId:t.PartNumber.id,quantity:t.quantity}),["stop","prevent"]),class:"btn btn-outline-success btn-sm"}," Done ",8,kt),Object(s["g"])("button",{onClick:Object(s["N"])(e=>n.deleteOutsourcing(t.id,{partNumberId:t.PartNumber.id,quantity:t.quantity}),["stop","prevent"]),class:"btn btn-outline-danger btn-sm ml-3"}," Delete ",8,Wt)])])]))),128))])])],512)),[[s["I"],!i.isLoading]])}var qt=r("2535"),Ht=r("f2c5"),Et={props:{initialIsShowFastOutsourcingFormArea:{type:Boolean},initialPartNumbers:{type:Array}},created(){this.fetchPartNumbers(this.initialPartNumbers),this.fetchOutsourcingLists(),this.fetchPartnerFactories(),this.fetchProductionProcessItems(),this.fetchIsShowFastOutsourcingFormArea(this.initialIsShowFastOutsourcingFormArea),this.fetchTodaysDate(),this.isLoading=!1},data(){return{isLoading:!0,isShowFastOutsourcingFormArea:!1,isProcessing:!1,newOutsourcing:{actionDate:"",partNumberName:"",partnerFactoryName:"",productionProcessItemName:"",partNumberId:"",partnerFactoryId:"",productionProcessItemId:"",quantity:null,note:""},outsourcinglists:[],partnerFactories:[],partNumbers:[],productionProcessItems:[],subPartNumbers:[]}},methods:{async fetchOutsourcingLists(){try{const t=await it["a"].Outsourcinglist.get(),{data:e,status:r,statusText:s}=t,{outsourcinglists:a}=e;if("OK"!==s&&200!==r)throw new Error;if("success"!==e.status)throw new Error(e.message);a.map(t=>{t.actionDate=`${new Date(t.actionDate).getFullYear()}/${new Date(t.actionDate).getMonth()+1}/${new Date(t.actionDate).getDate()}`}),this.outsourcinglists=a}catch(t){S["c"].fire({icon:"error",title:t||"外包清單載入錯誤，請稍後再試。"}),this.isLoading=!1}},async fetchPartnerFactories(){try{const{data:t,status:e,statusText:r}=await qt["a"].getAll(),{partnerFactories:s}=t;if("OK"!==r&&200!==e)throw new Error;if("success"!==t.status)throw new Error(t.message);this.partnerFactories=s}catch(t){S["c"].fire({icon:"error",title:t||"拿取協力商清單錯誤，請稍後再試。"})}},async fetchProductionProcessItems(){try{const{data:t,status:e,statusText:r}=await Ht["a"].getAll(),{productionProcessItems:s}=t;if("OK"!==r&&200!==e)throw new Error;if("success"!==t.status)throw new Error(t.message);this.productionProcessItems=s}catch(t){S["c"].fire({icon:"error",title:t||"拿取製程項目清單錯誤，請稍後再試。"})}},async handleSubmit(){try{this.isProcessing=!0;const t=(t,e)=>{let r=-1,s=this.partNumbers.length;while(r+1!==s){let a=Math.floor((r+s)/2);if(this.partNumbers[a].name===t){if(this.partNumbers[a].quantity-e<0)throw new Error(`"${t}" 數量不足以發外包`);return}this.partNumbers[a].name<t?r=a:s=a}return{result:!1,message:"找不到此部品"}};if(!this.verifyDataAfterSubmit())throw new Error("日期、品番號、廠商、製程、數量不可空白");t(this.newOutsourcing.partNumberName,this.newOutsourcing.quantity),this.fetchAllItemIdAfterSubmit();const e=new FormData;e.append("outsourcinglist",JSON.stringify([this.newOutsourcing]));const{data:r,status:s,statusText:a}=await it["a"].Outsourcinglist.create(e);if(200!==s&&"OK"!==a)throw new Error;if("success"!==r.status)throw new Error(r.message);this.outsourcinglists.unshift(this.unshiftOutsourcingDataAfterSubmit(this.newOutsourcing,r.outsourcinglists[0])),this.$emit("after-submited-new",r.partNumbers[0],r.warehousingHistories[0],r.outsourcinglists[0].actionDate),this.newOutsourcing={...this.clearDataAfterSubmit()},this.fetchTodaysDate(),this.isProcessing=!1,S["c"].fire({icon:"success",text:r.message})}catch(t){this.isProcessing=!1,S["c"].fire({icon:"error",title:t||"拿取製程項目清單錯誤，請稍後再試。"})}},verifyDataAfterSubmit(){return""!==this.newOutsourcing.actionDate&&""!==this.newOutsourcing.partNumberName&&""!==this.newOutsourcing.partnerFactoryName&&""!==this.newOutsourcing.productionProcessItemName&&Number(this.newOutsourcing.quantity)>0},fetchAllItemIdAfterSubmit(){this.partNumbers.map(t=>{if(t.name===this.newOutsourcing.partNumberName)return this.newOutsourcing.partNumberId=t.id}),this.partnerFactories.map(t=>{if(t.name===this.newOutsourcing.partnerFactoryName)return this.newOutsourcing.partnerFactoryId=t.id}),this.productionProcessItems.map(t=>{if(t.processName===this.newOutsourcing.productionProcessItemName)return this.newOutsourcing.productionProcessItemId=t.id})},unshiftOutsourcingDataAfterSubmit(t,e){let r={PartNumber:{id:t.partNumberId,name:t.partNumberName},PartnerFactory:{id:t.partnerFactoryId,name:t.partnerFactoryName},ProductionProcessItem:{id:t.productionProcessItemId,processName:t.productionProcessItemName},actionDate:`${new Date(e.actionDate).getFullYear()}/${new Date(e.actionDate).getMonth()+1}/${new Date(e.actionDate).getDate()}`,estimatedReturnDate:null,id:e.id,quantity:Number(t.quantity)};return r},clearDataAfterSubmit(){let t={actionDate:"",partNumberName:"",partnerFactoryName:"",productionProcessItemName:"",partNumberId:"",partnerFactoryId:"",productionProcessItemId:"",quantity:null,note:""};return t},async deleteOutsourcing(t,e){try{const{data:r,status:s,statusText:a}=await it["a"].Outsourcinglist.delete(t);if("OK"!==a&&200!==s)throw new Error;if("success"!==r.status)throw new Error(r.message);this.$emit("outsourcing-delete",e),this.outsourcinglists=this.outsourcinglists.filter(e=>e.id!==t),S["c"].fire({icon:"success",title:r.message})}catch(r){S["c"].fire({icon:"error",title:r||"拿取製程項目清單錯誤，請稍後再試。"})}},async theOutsourcingIsDoneToSubmit(t,e){try{const r=await S["a"].fire({inputValidator:t=>{if(!t)return"請輸入部品番!";const e=(t,e,r)=>{let s=-1,a=t.length;while(s+1!==a){let e=Math.floor((s+a)/2);if(t[e].name===r)return!0;t[e].name<r?s=e:t[e].name>r&&(a=e)}s=-1,a=e.length;while(s+1!==a){let t=Math.floor((s+a)/2);if(e[t].name===r)return!0;e[t].name<r?s=t:e[t].name>r&&(a=t)}return null};return e(this.partNumbers,this.subPartNumbers,t)?void 0:"找不到此部品"}});if(!r.value)return;const s=new FormData,a=t=>{let e=-1,r=this.partNumbers.length;while(e+1!==r){let s=Math.floor((e+r)/2);if(this.partNumbers[s].name===t)return{id:this.partNumbers[s].id,isSub:!1};this.partNumbers[s].name<t?e=s:this.partNumbers[s].name>t&&(r=s)}e=-1,r=this.subPartNumbers.length;while(e+1!==r){let s=Math.floor((e+r)/2);if(this.subPartNumbers[s].name===t)return{id:this.subPartNumbers[s].id,isSub:!0};this.subPartNumbers[s].name<t?e=s:this.subPartNumbers[s].name>t&&(r=s)}return null};let i=a(r.value);e.partNumberId=i.id,e.isSub=i.isSub,e.partNumberName=r.value,s.append("partNumberId",JSON.stringify(e.partNumberId)),s.append("quantity",JSON.stringify(e.quantity)),s.append("isSub",JSON.stringify(e.isSub));const{data:n,status:o,statusText:c}=await it["a"].Outsourcinglist.done(t,s);if("OK"!==c&&200!==o)throw new Error;if("success"!==n.status)throw new Error(n.message);this.outsourcinglists=this.outsourcinglists.filter(e=>e.id!==t),n.warehousingHistory.partNumberName=r.value,this.$emit("outsourcing-is-done-to-submit",e,n.warehousingHistory),S["c"].fire({icon:"success",text:n.message})}catch(r){S["c"].fire({icon:"error",title:r||"拿取製程項目清單錯誤，請稍後再試。"})}},fetchPartNumbers(t){this.partNumbers=t;for(let e of t)e.SubPartNumbers.length&&this.subPartNumbers.push(...e.SubPartNumbers)},fetchIsShowFastOutsourcingFormArea(t){this.isShowFastOutsourcingFormArea=t},toggleShowFastShippingWarehousingFormArea(){this.$emit("after-click-toggle-fast-form-area")},fetchTodaysDate(){let t=(new Date).getFullYear().toString(),e="",r="";e=(new Date).getMonth()<9?"0"+((new Date).getMonth()+1).toString():((new Date).getMonth()+1).toString(),r=(new Date).getDate()<10?"0"+(new Date).getDate().toString():(new Date).getDate().toString();const s=`${t}-${e}-${r}`;this.newOutsourcing.actionDate=s}},watch:{initialIsShowFastOutsourcingFormArea(t){this.fetchIsShowFastOutsourcingFormArea(t)},initialPartNumbers(t){this.fetchPartNumbers(t)}}};r("07cf");const _t=C()(Et,[["render",Tt],["__scopeId","data-v-392b000d"]]);var Ct=_t,$t=r("9f3a"),Ut={name:"HomePage",components:{PartnumberTable:U,WarehousingHistoriesTable:ct,OutsourcingListsTable:Ct,PageLoader:$t["a"]},beforeRouteUpdate(t,e,r){if(t.query.searchText||t.query.startDate||t.query.endDate){const e={searchText:t.query.searchText,startDate:t.query.startDate,endDate:t.query.endDate};return this.handleSearchartNumbers(e),void r()}const{customerId:s=""}=t.query;this.fetchPartNumbers({queryCategoryId:s}),r()},created(){const{customerId:t=""}=this.$route.query;this.fetchPartNumbers({queryCategoryId:t})},data(){return{partNumbers:[],customers:[],warehousingHistories:[],searchText:"",startDate:"",endDate:"",isLoading:!0,showOutsourcingListsTable:!1,isShowFastShippingWarehousingFormArea:!1,isShowFastOutsourcingFormArea:!1}},methods:{async fetchPartNumbers({queryCategoryId:t}){try{this.isLoading=!0;const e=await v["a"].getPartNumbers({customerId:t}),{data:r,status:s,statusText:a}=e,{partNumbers:i,customers:n,warehousingHistories:o}=r;if("OK"!==a&&200!==s)throw new Error;this.partNumbers=i,this.customers=n,this.warehousingHistories=o,this.searchText="",this.startDate="",this.endDate="",this.isLoading=!1}catch(e){S["c"].fire({icon:"error",title:"載入錯誤，請稍後再試。"}),this.isLoading=!1}},async handleSearchartNumbers(t){try{this.isLoading=!0;const{data:e,status:r,statusText:s}=await v["a"].getSearchPartNumbers(t);if("OK"!==s&&200!==r)throw new Error;const{partNumbers:a,warehousingHistories:i}=e;this.partNumbers=a,this.warehousingHistories=i,this.isLoading=!1}catch(e){S["c"].fire({icon:"error",title:"載入錯誤，請稍後再試。"}),this.isLoading=!1}},afterOutsourcingDoneToUpdateQuantity(t,e){this.warehousingHistory_update(e);for(let r of this.partNumbers){if(r.name===t.partNumberName)return void(r.quantity=r.quantity+Number(t.quantity));for(let e of r.subPartNumbers)if(e.name===t.partNumberName)return void(e.quantity=e.quantity+Number(t.quantity))}},warehousingHistory_update(t){this.warehousingHistories.unshift({PartNumber:{name:t.partNumberName},note:t.note,quntityOfShipping:null,quntityOfWarehousing:t.quntityOfWarehousing,textCreatedAt:`${new Date(t.updatedAt).getFullYear()}/${new Date(t.updatedAt).getMonth()+1}/${new Date(t.updatedAt).getDate()}`,totalQuntity:t.totalQuntity}),this.warehousingHistories.pop()},afterHandleShowOutsourcingListsTable(){this.showOutsourcingListsTable=!0},afterHandleShowWarehousingHistoriesTable(){this.showOutsourcingListsTable=!1},after_submited_new(t,e,r){let s=-1,a=this.partNumbers.length;while(s+1!==a){let e=Math.floor((s+a)/2);if(this.partNumbers[e].name===t.name){this.partNumbers[e].quantity=t.quantity;break}this.partNumbers[e].name<t.name?s=e:a=e}this.warehousingHistories.unshift({PartNumber:{name:t.name},note:e.note,quntityOfShipping:e.quntityOfShipping,quntityOfWarehousing:null,textCreatedAt:`${new Date(r).getFullYear()}/${new Date(r).getMonth()+1}/${new Date(r).getDate()}`,totalQuntity:e.totalQuntity}),this.warehousingHistories.pop()},toggleShowFastShippingWarehousingFormArea(){this.isShowFastShippingWarehousingFormArea=!this.isShowFastShippingWarehousingFormArea},toggleShowFastOutsourcingFormArea(){this.isShowFastOutsourcingFormArea=!this.isShowFastOutsourcingFormArea}}};r("73af");const Qt=C()(Ut,[["render",N],["__scopeId","data-v-6fe4a322"]]);e["default"]=Qt},f5df:function(t,e,r){"use strict";var s=r("00ee"),a=r("1626"),i=r("c6b6"),n=r("b622"),o=n("toStringTag"),c=Object,u="Arguments"===i(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(r){}};t.exports=s?i:function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=l(e=c(t),o))?r:u?i(e):"Object"===(s=i(e))&&a(e.callee)?"Arguments":s}}}]);
//# sourceMappingURL=chunk-6c57f9c4.7dbc0dfd.js.map