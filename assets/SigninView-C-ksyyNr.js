import{a as w,d as b,r as i,u as v,o as g,c as h,b as s,w as d,v as m,e as x,f as S,T as p,_}from"./index-B3sZZ5VW.js";const k={signIn({name:u,password:n}){return w.post("/signin",{name:u,password:n})}},I={class:"container mt-5 container-border bg-dark"},y={class:"form-label-group text-white"},P={class:"form-label-group text-white mt-4"},U=["disabled"],V=b({__name:"SigninView",setup(u){const n=S(),o=i(""),t=i(""),r=i(!1),c=v(),f=async()=>{try{if(!o.value||!t.value){p.fire({icon:"warning",title:"請填入 email 和 password"});return}r.value=!0;const a=await k.signIn({name:o.value,password:t.value}),{data:e}=a;if(e.status!=="success")throw new Error(e.message);localStorage.setItem("token",e.token),c.fetchCurrentUser(),n.push("/warehouse/home")}catch(a){console.log("error",a),t.value="",r.value=!1,p.fire({icon:"warning",title:"請確認您輸入了正確的帳號密碼"})}};return(a,e)=>(g(),h("div",I,[s("form",{onSubmit:x(f,["stop","prevent"]),class:"form-signin p-4 m-auto"},[e[4]||(e[4]=s("div",{class:"text-center mb-4"},[s("h1",{class:"h3 mb-3 font-weight-normal text-white"},"Sign In")],-1)),s("div",y,[e[2]||(e[2]=s("label",{for:"inputName"},"User",-1)),d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),type:"text",name:"name",class:"form-control",placeholder:"name",autofocus:"",autocomplete:"username"},null,512),[[m,o.value]])]),s("div",P,[e[3]||(e[3]=s("label",{for:"inputPassword"},"Password",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.value=l),type:"password",name:"password",class:"form-control",placeholder:"Password",autocomplete:"current-password"},null,512),[[m,t.value]])]),e[5]||(e[5]=s("br",null,null,-1)),s("button",{class:"btn btn-lg btn-success btn-block",type:"submit",disabled:r.value},"Submit",8,U)],32)]))}}),T=_(V,[["__scopeId","data-v-037be959"]]);export{T as default};
