import{m as c}from"./managers-C8avhEAh.js";import{M as m}from"./ManagerCustomerForm-oTykVyfi.js";import{_ as u,T as a,c as d,k as f,q as h,o as p}from"./index-bh3KkmT4.js";const g={name:"ManagerCustomerEdit",beforeRouteUpdate(e,t,s){const r=e.params.id;this.fetchCustomerData(r),s()},created(){const e=this.$route.params.id;this.fetchCustomerData(e)},components:{ManagerCustomerForm:m},data(){return{customer:{},isProcessing:!1}},methods:{async fetchCustomerData(e){try{const{data:t,status:s,statusText:r}=await c.customers.getDetail(e);if(r!=="OK"&&s!==200)throw new Error(t.message);const{customer:o}=t;this.customer=o}catch(t){a.fire({icon:"error",title:t})}},async handleAfterSubmit(e){try{this.isProcessing=!0;const t=this.$route.params.id,{data:s,status:r,statusText:o}=await c.customers.update({customerId:t,formData:e});if(o!=="OK"&&r!==200)throw new Error(s.message);this.$router.push({name:"manager-customers"}),a.fire({icon:"success",title:s.message}),this.isProcessing=!1}catch(t){a.fire({icon:"error",title:t}),this.isProcessing=!1}}}},l={class:"container mt-5 bg-dark container-bprder"};function _(e,t,s,r,o,i){const n=h("ManagerCustomerForm");return p(),d("div",l,[f(n,{"initial-customer":o.customer,onAfterSubmit:i.handleAfterSubmit,"is-processing":o.isProcessing},null,8,["initial-customer","onAfterSubmit","is-processing"])])}const M=u(g,[["render",_],["__scopeId","data-v-786a50d3"]]);export{M as default};
