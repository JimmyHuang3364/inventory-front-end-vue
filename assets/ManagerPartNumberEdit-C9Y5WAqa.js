import{M as c}from"./ManagerPartNumberForm-DjgfsmHG.js";import{m as n}from"./managers-yfZInAbt.js";import{_ as u,T as o,c as p,z as b,D as f,o as d}from"./index-6sV3kBzj.js";const h={name:"ManagerPartNumberEdit",components:{ManagerPartNumberForm:c},created(){this.fetchPartNumber(this.$route.params.id)},data(){return{partNumber:{},isProcessing:!1}},methods:{async fetchPartNumber(e){try{const{data:r,status:a,statusText:s}=await n.partNumbers.getOneDetail(e);if(s!=="OK"&&a!==200)throw new Error;const{partNumber:t}=r;this.partNumber=t,this.partNumber.isSubPartNumber=!1}catch{o.fire({icon:"error",title:"載入錯誤，請稍後在試。"})}},async handleAfterSubmit(e){try{this.isProcessing=!0;const{data:r,statusText:a,status:s}=await n.partNumbers.update(this.$route.params.id,e),{message:t}=r;if(a!=="OK"&&s!==200)throw new Error(t||"載入錯誤，請稍後在試。");this.isProcessing=!1,this.$router.push({name:"manager-part-numbers"}),o.fire({icon:"success",title:r.message})}catch(r){o.fire({icon:"error",title:r.message})}}}},l={class:"container container-border bg-dark mt-5"};function g(e,r,a,s,t,i){const m=f("ManagerPartNumberForm");return d(),p("div",l,[b(m,{onAfterSubmit:i.handleAfterSubmit,"initial-part-number":t.partNumber,"is-processing":t.isProcessing},null,8,["onAfterSubmit","initial-part-number","is-processing"])])}const w=u(h,[["render",g],["__scopeId","data-v-7eca076e"]]);export{w as default};
