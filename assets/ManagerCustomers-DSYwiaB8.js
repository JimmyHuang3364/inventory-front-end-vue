import{_ as w,T as d,c as l,z as h,y as u,b as t,A as g,F as b,s as x,D as p,o as n,C as y,t as i}from"./index-d9KIc4wf.js";import{m as _}from"./managers-Be_iI1Ff.js";import{P as C}from"./PageLoader-D42Q1lj7.js";const k={name:"ManagerCustomers",components:{PageLoader:C},created(){this.fetchCustomers()},data(){return{customers:[],isLoading:!0}},methods:{async fetchCustomers(){try{this.isLoading=!0;const{data:o,status:s,statusText:r}=await _.customers.get();if(r!=="OK"&&s!==200)throw new Error;const{customers:c}=o;this.customers=c,this.isLoading=!1}catch{d.fire({icon:"error",title:"載入錯誤，請稍後再試。"}),this.isLoading=!1}},async deleteCustomer(o){try{const{data:s,status:r,statusText:c}=await _.customers.delete(o);if(c!=="OK"&&r!==200)throw new Error;this.customers=this.customers.filter(a=>a.id!==o),d.fire({icon:"success",title:s.message})}catch{d.fire({icon:"error",title:"錯誤!!請稍後在試!!"})}}}},L={class:"m-5"},z={key:0},B={key:1},M={class:"d-flex justify-content-end mr-3"},V={class:"table table-hover table-striped table-dark"},P={class:"align-middle",scope:"row"},T={class:"align-middle"},H=["src"],N={class:"align-middle"},A={class:"align-middle"},E={class:"align-middle"},j={class:"align-middle"},D={class:"py-1 align-middle"},F=["onClick"];function K(o,s,r,c,a,f){const v=p("PageLoader"),m=p("router-link");return n(),l("div",L,[a.isLoading?(n(),l("div",z,[h(v)])):u("",!0),a.isLoading?u("",!0):(n(),l("div",B,[t("div",M,[h(m,{to:{name:"manager-customers-new"},class:"btn btn-primary btn-lg my-3"},{default:g(()=>s[0]||(s[0]=[y("+発注人")])),_:1})]),t("table",V,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},[t("h3",null,"#")]),t("th",{scope:"col"}),t("th",{scope:"col"},[t("h3",null,"名稱")]),t("th",{scope:"col"},[t("h3",null,"地址")]),t("th",{scope:"col"},[t("h3",null,"電話")]),t("th",{scope:"col"},[t("h3",null,"傳真")]),t("th",{scope:"col"},[t("h3",null,"操作")])])],-1)),t("tbody",null,[(n(!0),l(b,null,x(a.customers,e=>(n(),l("tr",{key:e.id},[t("td",P,[t("h4",null,i(e.id),1)]),t("th",T,[t("img",{src:e.img?e.img:"https://st4.depositphotos.com/14953852/24787/v/600/depositphotos_247872612-stock-illustration-no-image-available-icon-vector.jpg",width:"100px",height:"100px",alt:"..."},null,8,H)]),t("td",N,[t("h4",null,i(e.name),1)]),t("td",A,[t("h4",null,i(e.address),1)]),t("td",E,[t("h4",null,i(e.tel),1)]),t("td",j,[t("h4",null,i(e.fax),1)]),t("td",D,[h(m,{to:{name:"manager-customers-edit",params:{id:e.id}},class:"btn btn-outline-warning btn-lg mr-4"},{default:g(()=>s[1]||(s[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear-fill",viewBox:"0 0 16 16"},[t("path",{d:"M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"})],-1)])),_:2},1032,["to"]),t("button",{onClick:O=>f.deleteCustomer(e.id),class:"btn btn-outline-danger btn-lg"},s[2]||(s[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash-fill",viewBox:"0 0 16 16"},[t("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"})],-1)]),8,F)])]))),128))])])]))])}const G=w(k,[["render",K]]);export{G as default};
